
#
# Please note not all available settings / options are set here.
# For a full list, see the wiki
#

autogenerated = 0 # remove this line to remove the warning

# Configure Monitors
# See https://wiki.hyprland.org/Configuring/Monitors/

$primary_display = eDP-2

monitor=,preferred,auto,auto
monitor=$primary_display,2560x1600@165,0x0,1,vrr,1
# monitor=$bottom_right_display,1920x1080@60,4480x1080,1
# monitor=$bottom_left_display,1920x1080@60,0x1080,1
# monitor=$top_right_display,1920x1080@60,4480x0,1
# monitor=$top_left_display,1920x1080@60,0x0,1

env = PRIMARY_DISPLAY,$primary_display

env = XCURSOR_SIZE,24
env = QT_QPA_PLATFORMTHEME,gnome
env = GTK_THEME,Sweet

$scripts = $HOME/dotfiles/scripts

exec-once = /usr/lib/polkit-gnome/polkit-gnome-authentication-agent-1
exec-once = swaync
exec-once = ags
exec-once = /usr/lib/kdeconnectd
exec-once = wl-paste --type text --watch cliphist store #Stores only text data
exec-once = wl-paste --type image --watch cliphist store #Stores only image data
exec-once = nm-applet --indicator # network-manager gui
#exec-once = xembedsniproxy
exec-once = hypridle

exec-once = hyprpm reload

exec-once = /startup.sh

input {
    kb_layout = us
    kb_variant =
    kb_model =
    kb_options =
    kb_rules =
    numlock_by_default = true
    
    # because I move my mouse out before hitting ctrl+c a lot
    # and to fix guake closing when the mouse moves.
    follow_mouse = 2 
    mouse_refocus = false

    # fixes guake closing
    float_switch_override_focus = 0 

    touchpad {
        natural_scroll = no
    }

    sensitivity = 0
}

general {
    gaps_in = 2
    gaps_out = 4
    border_size = 2
    col.active_border = rgba(B60DC2ee)
    col.inactive_border = rgba(4B0B54ee)

    layout = dwindle

    allow_tearing = true
}

# vrr issue, even on linux 6.8 with my gpu
env = WLR_DRM_NO_ATOMIC,1

plugin {
    hyprwinwrap {
        class = kitty-bg
    }

    hyprexpo {
        columns = 3
        gap_size = 5
        bg_color = rgb(0D1326)
        workspace_method = first r~1
        
        enable_gesture = false
    }
}

group {

    col.border_active = rgba(B60DC2ee)
    col.border_inactive = rgba(4B0B54ee)

    groupbar {
        text_color = rgb(ffffff)
        
        col.active = rgba(202436ee)
        col.inactive = rgba(080E1Eee)
    }

}


decoration {
    rounding = 5
    
    blur {
        enabled = false
        size = 3
        passes = 1
    }

    drop_shadow = no
    shadow_range = 4
    shadow_render_power = 3
    col.shadow = rgba(1a1a1aee)
}

animations {
    enabled = yes

    bezier = myBezier, 0.05, 0.9, 0.1, 1.05

    animation = windows, 1, 7, myBezier
    animation = windowsOut, 1, 7, default, popin 80%
    animation = border, 1, 10, default
    animation = borderangle, 1, 8, default
    animation = fade, 1, 7, default
    animation = workspaces, 1, 6, default
}

dwindle {
    pseudotile = yes
    preserve_split = yes

    no_gaps_when_only=2
}

master {
    new_is_master = true
}

gestures {
    workspace_swipe = off
}

misc {
    force_default_wallpaper = -1
    vfr = true
}

$LSACG = CTRL ALT SHIFT SUPER
$LSCG = CTRL SHIFT SUPER
$LSAG = ALT SHIFT SUPER
$LCAG = CTRL ALT SUPER
$LSG = SHIFT SUPER
$LCG = CTRL SUPER
$LAG = ALT SUPER
$G = SUPER

# Main Binds
bind = CTRL ALT, T, exec, guake
bind = ALT, F4, exec, $scripts/killactive.py

bindr = SUPER, SUPER_R, exec, anyrun
# bind = SUPER, SUPER_R, exec, $HOME/dotfiles/scripts/flocktoggle.sh "$HOME/.wofilock" "wofi --show=drun --allow-images"
# bind = SUPER, R, exec, $HOME/dotfiles/scripts/flocktoggle.sh "$HOME/.wofilock" "wofi --show=run --allow-images"

bind = SUPER, V, exec, cliphist list | wofi -dmenu --allow-images | cliphist decode | wl-copy

# Screenshotting
bind = ALT, PRINT, exec, grimblast copy active
bind = SUPER SHIFT, S, exec, grimblast copy area
bind = , PRINT, exec, grimblast copy output

bind = CTRL ALT, PRINT, exec, grimblast save active - | satty -f -
bind = CTRL SUPER SHIFT, S, exec, grimblast save area - | satty -f -
bind = CTRL, PRINT, exec, grimblast save output - | satty -f -

# Media Control
bind = , XF86AudioPrev, exec, playerctl previous
bind = , XF86AudioPlay, exec, playerctl play-pause
bind = , XF86AudioNext, exec, playerctl next

# Brightness
bind = , XF86MonBrightnessUp, exec, brightnessctl set +5%
bind = , XF86MonBrightnessDown, exec, brightnessctl set 5%-

# volume
bind = , XF86AudioLowerVolume, exec, pactl set-sink-volume 0 -5%
bind = , XF86AudioRaiseVolume, exec, pactl set-sink-volume 0 +5%
bind = , XF86AudioMute, exec, pactl set-sink-mute 0 toggle

# Lock
bind = $G, L, exec, hyprlock

# LogOut/Reboot/Shutdown/Etc.
bind = $LSG, L, exec, wlogout

# Tiling Management
bind = $G, Left, workspace, r-1
bind = $G, Right, workspace, m+1
bind = $LSG, Left, workspace, r-1
bind = $LSG, Right, workspace, r+1

# Numpad
bind = $G, KP_Home, workspace, r-1
bind = $G, KP_Prior, workspace, m+1
bind = $LSG, KP_Home, workspace, r-1
bind = $LSG, KP_Prior, workspace, r+1

bind = $G, KP_Delete, togglegroup
bind = $G, KP_Multiply, togglesplit
bind = $G, KP_Divide, swapsplit

bind = $G, KP_End, togglefloating
bind = $G, KP_Next, pseudo,

bind = $G, KP_Begin, exec, $scripts/fullscreen.py 1
bind = $LCG, KP_Begin, exec, $scripts/fullscreen.py
bind = $LCAG, KP_Begin, exec, $scripts/fullscreen.py 2

bind = $LCG, Left, movetoworkspace, r-1
bind = $LCG, Right, movetoworkspace, r+1
bind = $LAG, Left, movetoworkspacesilent, r-1
bind = $LAG, Right, movetoworkspacesilent, r+1

bind = $LCG, KP_Home, movetoworkspace, r-1
bind = $LCG, KP_Prior, movetoworkspace, r+1
bind = $LAG, KP_Home, movetoworkspacesilent, r-1
bind = $LAG, KP_Prior, movetoworkspacesilent, r+1

bind = ALT, Tab, workspace, e+1
bind = CTRL ALT, Tab, cyclenext

# hyprlang noerror true
bind = SUPER, Tab, hyprexpo:expo, toggle
# hyprlang noerror false

bind = $G, KP_Up, movewindow, u
bind = $G, KP_Down, movewindow, d
bind = $G, KP_Left, movewindow, l
bind = $G, KP_Right, movewindow, r

bind = $LCG, KP_Up, swapwindow, u
bind = $LCG, KP_Down, swapwindow, d
bind = $LCG, KP_Left, swapwindow, l
bind = $LCG, KP_Right, swapwindow, r

bind = $LAG, KP_Up, movefocus, u
bind = $LAG, KP_Down, movefocus, d
bind = $LAG, KP_Left, movefocus, l
bind = $LAG, KP_Right, movefocus, r

# Move/resize windows with G + LMB/RMB and dragging
bindm = $G, mouse:272, movewindow
bindm = $G, mouse:273, resizewindow
bindm = $G, mouse:275, movewindow # back
bindm = $G, mouse:276, resizewindow # forward

# number select
bind = $G, 1, workspace, r~1
bind = $G, 2, workspace, r~2
bind = $G, 3, workspace, r~3
bind = $G, 4, workspace, r~4
bind = $G, 5, workspace, r~5
bind = $G, 6, workspace, r~6
bind = $G, 7, workspace, r~7
bind = $G, 8, workspace, r~8
bind = $G, 9, workspace, r~9
bind = $G, 0, workspace, r~10

# All the other Shit
bind = $G, M, exit

# Scroll through existing workspaces with G + scroll
bind = $G, mouse_down, workspace, e+1
bind = $G, mouse_up, workspace, e-1

# Window Rules

# make guake work properly
windowrulev2 = float, title:^(Guake!)$
windowrulev2 = move 10% 0, title:^(Guake!)$
windowrulev2 = move 10% 42, title:^(Guake!)$,onworkspace:m[$primary_display]
windowrulev2 = size 80% 40%, title:^(Guake!)$
windowrulev2 = animation slide top, title:^(Guake!)$
windowrulev2 = noborder, title:^(Guake!)$
windowrulev2 = rounding 0, title:^(Guake!)$

# steam
windowrulev2 = monitor $primary_display, class:^(steam_app_\d*)$
# windowrulev2 = immediate, class:^(steam_app_\d*)$
windowrulev2 = noinitialfocus, class:^(steam_app_\d*)$
windowrulev2 = monitor $primary_display, class:^(steam_app_\d*)$

# fix firefox fullscreen/lag
windowrulev2 = immediate, class:^(firefox)$

# default monitors for apps
windowrulev2 = monitor $top_left_display, class:^(vesktop)$
windowrulev2 = monitor $top_right_display, class:^(firefox)$
windowrulev2 = monitor $bottom_left_display, class:^(Code - Insiders)$

# Floating windows
windowrulev2 = float, class:^(com.gabm.satty)$

# prism, float popups
windowrulev2 = float, class:^(org.prismlauncher.PrismLauncher)$, title:^(?!Prism Launcher).*$

# tray popups
windowrulev2 = move onscreen 100% 0, title:^(MEGAsync)$, class:^(MEGAsync)$
windowrulev2 = move onscreen 100% 0, class:^(jetbrains-toolbox)$

# -- Fix odd behaviors in IntelliJ IDEs --
# https://github.com/hyprwm/Hyprland/issues/3450#issuecomment-1816761575

#! Fix focus issues when dialogs are opened or closed
windowrulev2 = windowdance,class:^(jetbrains-(?!toolbox)),floating:1
#! Fix splash screen showing in weird places and prevent annoying focus takeovers
windowrulev2 = center,class:^(jetbrains-(?!toolbox)),title:^(splash)$,floating:1
windowrulev2 = nofocus,class:^(jetbrains-(?!toolbox)),title:^(splash)$,floating:1
windowrulev2 = noborder,class:^(jetbrains-(?!toolbox)),title:^(splash)$,floating:1

#! fix new project showing in weird places
windowrulev2 = center, class:^(jetbrains-(?!toolbox)),title:^(New Project)$,floating:1

#! Center popups/find windows
windowrulev2 = center,class:^(jetbrains-(?!toolbox)),title:^( )$,floating:1
# windowrulev2 = stayfocused,class:^(jetbrains-(?!toolbox)),title:^( )$,floating:1
windowrulev2 = noborder,class:^(jetbrains-(?!toolbox)),title:^( )$,floating:1
#! Disable window flicker when autocomplete or tooltips appear
windowrulev2 = nofocus,class:^(jetbrains-(?!toolbox)),title:^(win.*)$,floating:1

windowrulev2 = size 10% 15%, title:^(warp cloudflare)$
windowrulev2 = center 1, title:^(warp cloudflare)$
